import{r as e,o as a,n as t,a as o,c as n,b as s,d as l,e as i,f as r,g as c,t as d,w as u,F as p,h as g,i as m,j as v,k as f,l as y}from"./vendor-DZ7PfAT8.js";import{r as h,g as b}from"./maps-C6-bEviq.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))a(e);new MutationObserver(e=>{for(const t of e)if("childList"===t.type)for(const e of t.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&a(e)}).observe(document,{childList:!0,subtree:!0})}function a(e){if(e.ep)return;e.ep=!0;const a=function(e){const a={};return e.integrity&&(a.integrity=e.integrity),e.referrerPolicy&&(a.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?a.credentials="include":"anonymous"===e.crossOrigin?a.credentials="omit":a.credentials="same-origin",a}(e);fetch(e.href,a)}}();const _=b(h());const C=(e,a)=>{const t=e.__vccOpts||e;for(const[o,n]of a)t[o]=n;return t};delete _.Icon.Default.prototype._getIconUrl,_.Icon.Default.mergeOptions({iconRetinaUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/images/marker-icon-2x.png",iconUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/images/marker-icon.png",shadowUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/images/marker-shadow.png"});const E={class:"map-container"},w={ref:"mapElement",class:"map"},L={class:"map-controls"},x=["disabled","title"];const k={class:"crosshair"};const S={class:"event-logger"},$={class:"event-logger__header"},F={class:"event-logger__controls"},T={class:"event-logger__content",ref:"logContent"},M={class:"event-logger__item-header"},A={class:"event-logger__item-type"},I={class:"event-logger__item-time"},z={class:"event-logger__item-message"},P={key:0,class:"event-logger__empty"};const j={class:"coordinate-display"},D={class:"coordinate-display__content"},O={key:0,class:"coordinate-display__values"},U={class:"coordinate-item"},B={class:"coordinate-item__value"},G={class:"coordinate-item__number"},N={class:"coordinate-item"},q={class:"coordinate-item__value"},H={class:"coordinate-item__number"},V={key:0,class:"coordinate-item"},R={class:"coordinate-item__value"},W={class:"coordinate-item__number"},Z={class:"coordinate-display__actions"},J={key:1,class:"coordinate-display__empty"};const K={class:"app"},Y={class:"header"},Q={class:"header__controls"},X={class:"main"},ee={class:"map-section"};y(C({name:"App",components:{MapContainer:C({name:"MapContainer",emits:["coordinates-changed","location-found","location-error","map-event"],setup(n,{emit:s}){const l=e(null),i=e(null),r=e(null),c=e(!1),d=e(null),{getCurrentPosition:u}=function(){const a=e("geolocation"in navigator),t=e(!1),o=e(null);return{isSupported:a,isLoading:t,error:o,getCurrentPosition:(e={})=>new Promise((n,s)=>{if(!a.value){const e=new Error("Geolocation is not supported by this browser");return e.code=0,void s(e)}t.value=!0,o.value=null;const l={enableHighAccuracy:!0,timeout:15e3,maximumAge:6e4,...e};navigator.geolocation.getCurrentPosition(e=>{t.value=!1,n(e)},e=>{t.value=!1,o.value=e,s(e)},l)}),watchPosition:(e,t={})=>{if(!a.value){const e=new Error("Geolocation is not supported by this browser");return e.code=0,o.value=e,null}const n={enableHighAccuracy:!0,timeout:15e3,maximumAge:6e4,...t};return navigator.geolocation.watchPosition(a=>{o.value=null,e(a)},a=>{o.value=a,e(null,a)},n)},clearWatch:e=>{e&&a.value&&navigator.geolocation.clearWatch(e)}}}(),p=()=>{const e=i.value.getCenter();s("coordinates-changed",{lat:e.lat,lng:e.lng,accuracy:null}),s("map-event",{type:"map_moved",message:`Map moved to ${e.lat.toFixed(6)}, ${e.lng.toFixed(6)}`})},g=()=>{const e=i.value.getZoom();s("map-event",{type:"map_zoomed",message:`Map zoom changed to ${e}`})},m=e=>{i.value.setView([e.latlng.lat,e.latlng.lng]),s("map-event",{type:"map_clicked",message:`Map clicked at ${e.latlng.lat.toFixed(6)}, ${e.latlng.lng.toFixed(6)}`})},v=async()=>{if(!c.value){c.value=!0,d.value={type:"info",message:"Locating..."};try{const e=await u({enableHighAccuracy:!0,timeout:1e4,maximumAge:6e4}),{latitude:a,longitude:t,accuracy:o}=e.coords;i.value.setView([a,t],16),r.value&&i.value.removeLayer(r.value),r.value=_.marker([a,t],{title:"Your Location"}).addTo(i.value);const n=_.circle([a,t],{radius:o,color:"#3388ff",fillColor:"#3388ff",fillOpacity:.1,weight:2}).addTo(i.value);r.value.accuracyCircle=n,d.value={type:"success",message:`Location found (±${Math.round(o)}m accuracy)`},s("location-found",{lat:a,lng:t,accuracy:o}),s("coordinates-changed",{lat:a,lng:t,accuracy:o}),setTimeout(()=>{d.value=null},3e3)}catch(e){let a="Location access denied or unavailable";switch(e.code){case 1:a="Location access denied by user";break;case 2:a="Location unavailable";break;case 3:a="Location request timed out";break;default:a=e.message||"Unknown location error"}d.value={type:"error",message:a},s("location-error",{code:e.code,message:a}),setTimeout(()=>{d.value=null},5e3)}finally{c.value=!1}}};return a(async()=>{await t(),await(async()=>{l.value&&(i.value=_.map(l.value,{zoomControl:!1,attributionControl:!0}).setView([51.505,-.09],13),_.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:"© OpenStreetMap contributors",maxZoom:19}).addTo(i.value),_.control.zoom({position:"bottomright"}).addTo(i.value),i.value.on("moveend",p),i.value.on("zoomend",g),i.value.on("click",m),s("map-event",{type:"map_initialized",message:"Map initialized successfully"}),await v())})()}),o(()=>{i.value&&i.value.remove()}),{mapElement:l,isLocating:c,locationStatus:d,locateUser:v,getStatusIcon:e=>{switch(e){case"success":return"fas fa-check-circle";case"error":return"fas fa-exclamation-circle";default:return"fas fa-info-circle"}}}}},[["render",function(e,a,t,o,u,p){return s(),n("div",E,[l("div",w,null,512),l("div",L,[l("button",{onClick:a[0]||(a[0]=(...e)=>o.locateUser&&o.locateUser(...e)),class:"btn btn--primary btn--round",disabled:o.isLocating,title:o.isLocating?"Locating...":"Find my location"},[l("i",{class:r(o.isLocating?"fas fa-spinner fa-spin":"fas fa-location-arrow")},null,2)],8,x)]),o.locationStatus?(s(),n("div",{key:0,class:r(["location-status",`location-status--${o.locationStatus.type}`])},[l("i",{class:r(o.getStatusIcon(o.locationStatus.type))},null,2),c(" "+d(o.locationStatus.message),1)],2)):i("",!0)])}]]),Crosshair:C({name:"Crosshair"},[["render",function(e,a,t,o,i,r){return s(),n("div",k,a[0]||(a[0]=[l("div",{class:"crosshair__horizontal"},null,-1),l("div",{class:"crosshair__vertical"},null,-1),l("div",{class:"crosshair__center"},null,-1)]))}],["__scopeId","data-v-c2b118c8"]]),EventLogger:C({name:"EventLogger",props:{events:{type:Array,required:!0}},emits:["close","clear-events"],setup(a){const o=e(null);return u(()=>a.events.length,async()=>{await t(),o.value&&(o.value.scrollTop=o.value.scrollHeight)}),{logContent:o,getEventIcon:e=>({gps:"fas fa-location-arrow",coordinates:"fas fa-crosshairs",map:"fas fa-map",ui:"fas fa-mouse-pointer",system:"fas fa-cog",error:"fas fa-exclamation-triangle",map_initialized:"fas fa-map",map_moved:"fas fa-arrows-alt",map_zoomed:"fas fa-search",map_clicked:"fas fa-mouse-pointer"}[e]||"fas fa-circle"),formatTime:e=>new Date(e).toLocaleTimeString()}}},[["render",function(e,a,t,o,u,m){return s(),n("div",S,[l("div",$,[a[4]||(a[4]=l("h3",{class:"event-logger__title"},[l("i",{class:"fas fa-list"}),c(" Event Log ")],-1)),l("div",F,[l("button",{onClick:a[0]||(a[0]=a=>e.$emit("clear-events")),class:"btn btn--small btn--secondary"},a[2]||(a[2]=[l("i",{class:"fas fa-trash"},null,-1),c(" Clear ")])),l("button",{onClick:a[1]||(a[1]=a=>e.$emit("close")),class:"btn btn--small btn--secondary"},a[3]||(a[3]=[l("i",{class:"fas fa-times"},null,-1)]))])]),l("div",T,[(s(!0),n(p,null,g(t.events,e=>(s(),n("div",{key:e.id,class:r(["event-logger__item",`event-logger__item--${e.type}`])},[l("div",M,[l("span",A,[l("i",{class:r(o.getEventIcon(e.type))},null,2),c(" "+d(e.type.toUpperCase()),1)]),l("span",I,d(o.formatTime(e.timestamp)),1)]),l("div",z,d(e.message),1)],2))),128)),0===t.events.length?(s(),n("div",P,a[5]||(a[5]=[l("i",{class:"fas fa-inbox"},null,-1),l("p",null,"No events logged yet",-1)]))):i("",!0)],512)])}],["__scopeId","data-v-0dc24d48"]]),CoordinateDisplay:C({name:"CoordinateDisplay",props:{coordinates:{type:Object,required:!0}},emits:["copy-coordinates"],setup(a,{emit:t}){const o=e(!1),n=e=>e?e.toFixed(6):"0.000000",s=e=>{const a=document.createElement("textarea");a.value=e,a.style.position="fixed",a.style.left="-999999px",a.style.top="-999999px",document.body.appendChild(a),a.focus(),a.select();try{document.execCommand("copy"),l()}catch(t){console.error("Fallback copy failed:",t)}document.body.removeChild(a)},l=()=>{o.value=!0,setTimeout(()=>{o.value=!1},2e3)};return{copySuccess:o,formatCoordinate:n,copyToClipboard:async e=>{try{await navigator.clipboard.writeText(e.toString()),l()}catch(a){console.error("Failed to copy to clipboard:",a),s(e.toString())}},copyBothCoordinates:async()=>{if(!a.coordinates.lat||!a.coordinates.lng)return;const e=`${n(a.coordinates.lat)}, ${n(a.coordinates.lng)}`;try{await navigator.clipboard.writeText(e),l(),t("copy-coordinates",a.coordinates)}catch(o){console.error("Failed to copy to clipboard:",o),s(e)}},copyAsString:async()=>{if(!a.coordinates.lat||!a.coordinates.lng)return;const e=`lat: ${n(a.coordinates.lat)}, lng: ${n(a.coordinates.lng)}`;try{await navigator.clipboard.writeText(e),l(),t("copy-coordinates",a.coordinates)}catch(o){console.error("Failed to copy to clipboard:",o),s(e)}}}}},[["render",function(e,a,t,o,r,u){return s(),n("div",j,[l("div",D,[a[12]||(a[12]=l("h3",{class:"coordinate-display__title"},[l("i",{class:"fas fa-crosshairs"}),c(" Current Coordinates ")],-1)),t.coordinates.lat&&t.coordinates.lng?(s(),n("div",O,[l("div",U,[a[5]||(a[5]=l("label",{class:"coordinate-item__label"},"Latitude:",-1)),l("div",B,[l("span",G,d(o.formatCoordinate(t.coordinates.lat)),1),l("button",{onClick:a[0]||(a[0]=e=>o.copyToClipboard(t.coordinates.lat)),class:"btn btn--small btn--icon",title:"Copy latitude"},a[4]||(a[4]=[l("i",{class:"fas fa-copy"},null,-1)]))])]),l("div",N,[a[7]||(a[7]=l("label",{class:"coordinate-item__label"},"Longitude:",-1)),l("div",q,[l("span",H,d(o.formatCoordinate(t.coordinates.lng)),1),l("button",{onClick:a[1]||(a[1]=e=>o.copyToClipboard(t.coordinates.lng)),class:"btn btn--small btn--icon",title:"Copy longitude"},a[6]||(a[6]=[l("i",{class:"fas fa-copy"},null,-1)]))])]),t.coordinates.accuracy?(s(),n("div",V,[a[8]||(a[8]=l("label",{class:"coordinate-item__label"},"Accuracy:",-1)),l("div",R,[l("span",W,"±"+d(Math.round(t.coordinates.accuracy))+"m",1)])])):i("",!0),l("div",Z,[l("button",{onClick:a[2]||(a[2]=(...e)=>o.copyBothCoordinates&&o.copyBothCoordinates(...e)),class:"btn btn--primary"},a[9]||(a[9]=[l("i",{class:"fas fa-copy"},null,-1),c(" Copy Both Coordinates ")])),l("button",{onClick:a[3]||(a[3]=(...e)=>o.copyAsString&&o.copyAsString(...e)),class:"btn btn--secondary"},a[10]||(a[10]=[l("i",{class:"fas fa-link"},null,-1),c(" Copy as String ")]))])])):(s(),n("div",J,a[11]||(a[11]=[l("i",{class:"fas fa-location-arrow"},null,-1),l("p",null,"Move the map to select coordinates",-1)])))])])}],["__scopeId","data-v-8d2bcbef"]])},setup(){const t=e(!1),o=e({lat:null,lng:null,accuracy:null}),{events:n,logEvent:s,clearEvents:l}=function(){const a=e([]),t=(e,t,o={})=>{const n={id:Date.now()+Math.random().toString(36).substr(2,9),type:e,message:t,timestamp:Date.now(),...o};a.value.push(n),a.value.length>100&&(a.value=a.value.slice(-100)),console.log(`[${e.toUpperCase()}] ${t}`,o)};return{events:a,logEvent:t,clearEvents:()=>{a.value=[],t("system","Event log cleared")},getEventsByType:e=>a.value.filter(a=>a.type===e),getEventsInTimeRange:(e,t)=>a.value.filter(a=>a.timestamp>=e&&a.timestamp<=t),exportEvents:()=>{const e={exportDate:(new Date).toISOString(),totalEvents:a.value.length,events:a.value};return JSON.stringify(e,null,2)}}}();return a(()=>{s("system","Application initialized")}),{showEventLogger:t,currentCoordinates:o,events:n,toggleEventLogger:()=>{t.value=!t.value,s("ui","Event logger "+(t.value?"opened":"closed"))},handleCoordinatesChanged:e=>{o.value=e,s("coordinates",`Crosshair positioned at ${e.lat.toFixed(6)}, ${e.lng.toFixed(6)}`)},handleLocationFound:e=>{s("gps",`GPS location found: ${e.lat.toFixed(6)}, ${e.lng.toFixed(6)} (accuracy: ${e.accuracy}m)`)},handleLocationError:e=>{s("error",`GPS error: ${e.message}`)},handleCopyCoordinates:e=>{s("ui",`Coordinates copied to clipboard: ${e.lat.toFixed(6)}, ${e.lng.toFixed(6)}`)},logEvent:s,clearEvents:l}}},[["render",function(e,a,t,o,d,u){const p=m("MapContainer"),g=m("Crosshair"),y=m("CoordinateDisplay"),h=m("EventLogger");return s(),n("div",K,[l("header",Y,[a[3]||(a[3]=l("h1",{class:"header__title"},[l("i",{class:"fas fa-crosshairs"}),c(" GPS Coordinate Selector ")],-1)),l("div",Q,[l("button",{onClick:a[0]||(a[0]=(...e)=>o.toggleEventLogger&&o.toggleEventLogger(...e)),class:r(["btn btn--secondary",{"btn--active":o.showEventLogger}])},a[2]||(a[2]=[l("i",{class:"fas fa-list"},null,-1),l("span",{class:"btn__text"},"Events",-1)]),2)])]),l("main",X,[l("div",ee,[v(p,{onCoordinatesChanged:o.handleCoordinatesChanged,onLocationFound:o.handleLocationFound,onLocationError:o.handleLocationError,onMapEvent:o.logEvent},null,8,["onCoordinatesChanged","onLocationFound","onLocationError","onMapEvent"]),v(g)]),v(y,{coordinates:o.currentCoordinates,onCopyCoordinates:o.handleCopyCoordinates},null,8,["coordinates","onCopyCoordinates"]),o.showEventLogger?(s(),f(h,{key:0,events:o.events,onClose:a[1]||(a[1]=e=>o.showEventLogger=!1),onClearEvents:o.clearEvents},null,8,["events","onClearEvents"])):i("",!0)])])}]])).mount("#app");
